<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>User Profile and Picture</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
  
    <script type="text/javascript">
        function in_frame () { try { return window.self !== window.top; } catch (e) { return true; } }
        if (!in_frame()) {
            var page = location.pathname.substring(location.pathname.lastIndexOf("/") + 1);
            window.location = 'index.html#' + page;
        }
    </script>
</head>
<body><div class="page"><h1 class="title">User Profile and Picture</h1><br/>Upload user profile<br /><br /><strong><h3>Create user profile model </h3></strong><br />This profile model has one to one relation with user model as each user can have only one profile.<br /><br /><br />• django_project<br />   ◇ users<br />      ▪ models.py<br /><br /><div class="codebox"><div class="codebox">from&nbsp;django.db&nbsp;import&nbsp;models<br />from&nbsp;django.contrib.auth.models&nbsp;import&nbsp;User<br /><br />class&nbsp;Profile<span style="color:#ff9d00;font-weight:700">(</span>models.Model<span style="color:#ff9d00;font-weight:700">):</span><br />&nbsp;&nbsp;&nbsp;&nbsp;user&nbsp;=&nbsp;models.OneToOneField<span style="color:#ff9d00;font-weight:700">(</span>User,&nbsp;on_delete&nbsp;=&nbsp;models.CASCADE<span style="color:#ff9d00;font-weight:700">)</span><br />&nbsp;&nbsp;&nbsp;&nbsp;image&nbsp;=&nbsp;models.ImageField<span style="color:#ff9d00;font-weight:700">(</span>default&nbsp;=&nbsp;<span style="color:#3ad900;font-weight:400">'default.jpg'</span>,&nbsp;upload_to&nbsp;=&nbsp;<span style="color:#3ad900;font-weight:400">'profile_pics'</span><span style="color:#ff9d00;font-weight:700">)</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__str__<span style="color:#ff9d00;font-weight:700">(</span>self<span style="color:#ff9d00;font-weight:700">):</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">return</span>&nbsp;f<span style="color:#3ad900;font-weight:400">'{self.user.username}&nbsp;Profile'</span></div></div><br /><br /><br /><strong><h3>Migrate this model</h3></strong><br /><br /><em><h3>python manage.py makemigrations<br /></h3></em><br />When we run this, we get an error Can not user Imagefield becuase Pillow is not installed<br /><br />Pillow is the library for working with images in python<br />So install this  Pillow library<br /><br /><em><h3>pip install Pillow</h3></em><br /><br />Run makemigrations command again<br /><br /><em><h3>python manage.py makemigrations</h3></em><br /><br /><em><h3>python manage.py migrate</h3></em><br /><br /><br />To view this user profile in admin page,  we need to register this profile model in admin.py file on app.<br /><br />• django_project<br />   ◇ users<br />      ▪ admin.py<br /><br /><div class="codebox"><div class="codebox">from&nbsp;django.contrib&nbsp;import&nbsp;admin<br />from&nbsp;.models&nbsp;import&nbsp;Profile<br /><br />admin.site.register<span style="color:#ff9d00;font-weight:700">(</span>Profile<span style="color:#ff9d00;font-weight:700">)</span></div></div><br /><br />Now you can add profile from admin page.<br /><br />For accessing this Profile model run python shell<br /><br />python manage.py shell<br /><br /><div class="codebox"><div class="codebox">from&nbsp;django.contrib.auth.models&nbsp;import&nbsp;User<br /><br />user&nbsp;=&nbsp;User.objects.filter<span style="color:#ff9d00;font-weight:700">(</span>username&nbsp;=&nbsp;<span style="color:#3ad900;font-weight:400">'Dimple'</span><span style="color:#ff9d00;font-weight:700">)</span>.<span style="color:#ffdd00;font-weight:400">first()</span><br />user<br />output<span style="color:#ff9d00;font-weight:700">:</span>&nbsp;&lt;User<span style="color:#ff9d00;font-weight:700">:</span>Dimple&gt;<br /><br /><span style="color:#0088ff;font-weight:400">#&nbsp;As&nbsp;we&nbsp;have&nbsp;one&nbsp;to&nbsp;one&nbsp;relationship&nbsp;with&nbsp;profile,&nbsp;we&nbsp;can&nbsp;now&nbsp;access&nbsp;profile&nbsp;using&nbsp;this&nbsp;user&nbsp;variable</span><br /><br />user.profile<br />output<span style="color:#ff9d00;font-weight:700">:</span>&nbsp;&lt;Profile<span style="color:#ff9d00;font-weight:700">:</span>&nbsp;Dimple&nbsp;Profile&gt;<br /><br />user.profile.image<br /><br />user.profile.image.width<br /><br />user.profile.image.url<br /></div></div><br /><br /><br />We don't access images direcly, we access using it's location.<br /><br />This images are actually saved in<br /><br />• djanog_project<br />   ◇ profile_pics<br /><br />This is not a proper way to store images. If multiple models saves different kinds of images, then the root directory will be meshed up.<br /><br />To have all the image in proper location, make some changes in settings.py file<br /><br />• djanog_project<br />   ◇ django_project<br />      ▪ settings.py<br /><br /><br />At the bottom, add<br /><br />MEDIA_ROOT = os.path.join(BASE_DIR, ‘media’) <br /><br />This is saying root to the base directory which is django_project and then directory call media<br /><br />MEDIA_URL = ‘/media/’<br /><br /><br /><span style="color:#191905;">media root is the full path to a directory where we like django to store uploaded file  by default, this files are stored in the file system and not in the database . <br />So this media root is the directory</span> is the directory where uploaded file will be saved. <br /><br /><br /><br /><div class="codebox"><div class="codebox">import&nbsp;os<br /><br /><span style="color:#0088ff;font-weight:400">#&nbsp;Build&nbsp;paths&nbsp;inside&nbsp;the&nbsp;project&nbsp;like&nbsp;this:&nbsp;os.path.join(BASE_DIR,&nbsp;...)</span><br />BASE_DIR&nbsp;=&nbsp;os.path.dirname<span style="color:#ff9d00;font-weight:700">(</span>os.path.dirname<span style="color:#ff9d00;font-weight:700">(</span>os.path.abspath<span style="color:#ff9d00;font-weight:700">(</span>__file__<span style="color:#ff9d00;font-weight:700">)))</span><br /><br /><br /><span style="color:#0088ff;font-weight:400">#&nbsp;Quick-start&nbsp;development&nbsp;settings&nbsp;-&nbsp;unsuitable&nbsp;for&nbsp;production</span><br /><span style="color:#0088ff;font-weight:400">#&nbsp;See&nbsp;https://docs.djangoproject.com/en/3.0/howto/deployment/checklist/</span><br /><br /><span style="color:#0088ff;font-weight:400">#&nbsp;SECURITY&nbsp;WARNING:&nbsp;keep&nbsp;the&nbsp;secret&nbsp;key&nbsp;used&nbsp;in&nbsp;production&nbsp;secret!</span><br />SECRET_KEY&nbsp;=&nbsp;<span style="color:#3ad900;font-weight:400">'ezmx*&amp;72_-a42@i##kc(up7vzp6qqha1=d)+=^@@w3-_=5w!r)'</span><br /><br /><span style="color:#0088ff;font-weight:400">#&nbsp;SECURITY&nbsp;WARNING:&nbsp;don't&nbsp;run&nbsp;with&nbsp;debug&nbsp;turned&nbsp;on&nbsp;in&nbsp;production!</span><br />DEBUG&nbsp;=&nbsp;True<br /><br />ALLOWED_HOSTS&nbsp;=&nbsp;[]<br /><br /><br /><span style="color:#0088ff;font-weight:400">#&nbsp;Application&nbsp;definition</span><br /><br />INSTALLED_APPS&nbsp;=&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'blog.apps.BlogConfig'</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'users.apps.UsersConfig'</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'crispy_forms'</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'django.contrib.admin'</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'django.contrib.auth'</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'django.contrib.contenttypes'</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'django.contrib.sessions'</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'django.contrib.messages'</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'django.contrib.staticfiles'</span>,<br />]<br /><br />MIDDLEWARE&nbsp;=&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'django.middleware.security.SecurityMiddleware'</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'django.contrib.sessions.middleware.SessionMiddleware'</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'django.middleware.common.CommonMiddleware'</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'django.middleware.csrf.CsrfViewMiddleware'</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'django.contrib.auth.middleware.AuthenticationMiddleware'</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'django.contrib.messages.middleware.MessageMiddleware'</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'django.middleware.clickjacking.XFrameOptionsMiddleware'</span>,<br />]<br /><br />ROOT_URLCONF&nbsp;=&nbsp;<span style="color:#3ad900;font-weight:400">'web_learning.urls'</span><br /><br />TEMPLATES&nbsp;=&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'BACKEND'</span><span style="color:#ff9d00;font-weight:700">:</span>&nbsp;<span style="color:#3ad900;font-weight:400">'django.template.backends.django.DjangoTemplates'</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'DIRS'</span><span style="color:#ff9d00;font-weight:700">:</span>&nbsp;[os.path.join<span style="color:#ff9d00;font-weight:700">(</span>BASE_DIR,&nbsp;<span style="color:#3ad900;font-weight:400">'templates'</span><span style="color:#ff9d00;font-weight:700">)</span>]<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'APP_DIRS'</span><span style="color:#ff9d00;font-weight:700">:</span>&nbsp;True,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'OPTIONS'</span><span style="color:#ff9d00;font-weight:700">:</span>&nbsp;<span style="color:#ff9d00;font-weight:700">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'context_processors'</span><span style="color:#ff9d00;font-weight:700">:</span>&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'django.template.context_processors.debug'</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'django.template.context_processors.request'</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'django.contrib.auth.context_processors.auth'</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'django.contrib.messages.context_processors.messages'</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">}</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">}</span>,<br />]<br /><br />WSGI_APPLICATION&nbsp;=&nbsp;<span style="color:#3ad900;font-weight:400">'web_learning.wsgi.application'</span><br /><br /><br /><span style="color:#0088ff;font-weight:400">#&nbsp;Database</span><br /><span style="color:#0088ff;font-weight:400">#&nbsp;https://docs.djangoproject.com/en/3.0/ref/settings/#databases</span><br /><br />DATABASES&nbsp;=&nbsp;<span style="color:#ff9d00;font-weight:700">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'default'</span><span style="color:#ff9d00;font-weight:700">:</span>&nbsp;<span style="color:#ff9d00;font-weight:700">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'ENGINE'</span><span style="color:#ff9d00;font-weight:700">:</span>&nbsp;<span style="color:#3ad900;font-weight:400">'django.db.backends.sqlite3'</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'NAME'</span><span style="color:#ff9d00;font-weight:700">:</span>&nbsp;os.path.join<span style="color:#ff9d00;font-weight:700">(</span>BASE_DIR,&nbsp;<span style="color:#3ad900;font-weight:400">'db.sqlite3'</span><span style="color:#ff9d00;font-weight:700">)</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">}</span><br /><span style="color:#ff9d00;font-weight:700">}</span><br /><br /><br /><span style="color:#0088ff;font-weight:400">#&nbsp;Password&nbsp;validation</span><br /><span style="color:#0088ff;font-weight:400">#&nbsp;https://docs.djangoproject.com/en/3.0/ref/settings/#auth-password-validators</span><br /><br />AUTH_PASSWORD_VALIDATORS&nbsp;=&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'NAME'</span><span style="color:#ff9d00;font-weight:700">:</span>&nbsp;<span style="color:#3ad900;font-weight:400">'django.contrib.auth.password_validation.UserAttributeSimilarityValidator'</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">}</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'NAME'</span><span style="color:#ff9d00;font-weight:700">:</span>&nbsp;<span style="color:#3ad900;font-weight:400">'django.contrib.auth.password_validation.MinimumLengthValidator'</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">}</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'NAME'</span><span style="color:#ff9d00;font-weight:700">:</span>&nbsp;<span style="color:#3ad900;font-weight:400">'django.contrib.auth.password_validation.CommonPasswordValidator'</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">}</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'NAME'</span><span style="color:#ff9d00;font-weight:700">:</span>&nbsp;<span style="color:#3ad900;font-weight:400">'django.contrib.auth.password_validation.NumericPasswordValidator'</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">}</span>,<br />]<br /><br /><br /><span style="color:#0088ff;font-weight:400">#&nbsp;Internationalization</span><br /><span style="color:#0088ff;font-weight:400">#&nbsp;https://docs.djangoproject.com/en/3.0/topics/i18n/</span><br /><br />LANGUAGE_CODE&nbsp;=&nbsp;<span style="color:#3ad900;font-weight:400">'en-us'</span><br /><br />TIME_ZONE&nbsp;=&nbsp;<span style="color:#3ad900;font-weight:400">'UTC'</span><br /><br />USE_I18N&nbsp;=&nbsp;True<br /><br />USE_L10N&nbsp;=&nbsp;True<br /><br />USE_TZ&nbsp;=&nbsp;True<br /><br /><br /><span style="color:#0088ff;font-weight:400">#&nbsp;Static&nbsp;files&nbsp;(CSS,&nbsp;JavaScript,&nbsp;Images)</span><br /><span style="color:#0088ff;font-weight:400">#&nbsp;https://docs.djangoproject.com/en/3.0/howto/static-files/</span><br /><br />STATIC_URL&nbsp;=&nbsp;<span style="color:#3ad900;font-weight:400">'/static/'</span><br /><br /><br />MEDIA_ROOT&nbsp;=&nbsp;os.path.join<span style="color:#ff9d00;font-weight:700">(</span>BASE_DIR,&nbsp;<span style="color:#3ad900;font-weight:400">'media'</span><span style="color:#ff9d00;font-weight:700">)</span><br />MEDIA_URL&nbsp;=&nbsp;<span style="color:#3ad900;font-weight:400">'/media.'</span><br /><br />CRISPY_TEMPLATE_PACK&nbsp;=&nbsp;<span style="color:#3ad900;font-weight:400">'bootstrap4'</span><br /><br />LOGIN_REDIRECT_URL&nbsp;=&nbsp;<span style="color:#3ad900;font-weight:400">'blog-home'</span><br />LOGIN_URL&nbsp;=&nbsp;<span style="color:#3ad900;font-weight:400">'login'</span><br /></div></div><br /><br /><br />Now when we upload an image, it will create profile_pic directory inside of this media directory and put the image in there.<br />and media directory is located in the base directory.<br /><br />So, now if we upload the image, it will be located in<br /><br />• django_project<br />   ◇ media<br />      ▪ profile_pics<br /><br /><strong><h3>Updating user profile page</h3></strong><br /><br />In profile page, we have only username.<br />But there shold be profile pic, email address, update form<br /><br />• djnago_project<br />   ◇ users<br />      ▪ templates<br />         - users<br />            → profile.html<br /><br /><br /><div class="codebox"><div class="codebox"><span style="color:#ff9d00;font-weight:700">{</span>%&nbsp;extends&nbsp;<span style="color:#3ad900;font-weight:400">"blog/base.html"</span>&nbsp;%<span style="color:#ff9d00;font-weight:700">}</span><br /><span style="color:#ff9d00;font-weight:700">{</span>%&nbsp;load&nbsp;crispy_forms_tags&nbsp;&nbsp;&nbsp;&nbsp;%<span style="color:#ff9d00;font-weight:700">}</span><br /><span style="color:#ff9d00;font-weight:700">{</span>%&nbsp;block&nbsp;content&nbsp;%<span style="color:#ff9d00;font-weight:700">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=<span style="color:#3ad900;font-weight:400">"content-section"</span>&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=<span style="color:#3ad900;font-weight:400">"media"</span>&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;img&nbsp;class=<span style="color:#3ad900;font-weight:400">"rounded-circle&nbsp;account-img"</span>&nbsp;src=<span style="color:#3ad900;font-weight:400">"{{&nbsp;user.profile.image.url&nbsp;}}"</span>&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=<span style="color:#3ad900;font-weight:400">"media-body"</span>&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h2&nbsp;class=<span style="color:#3ad900;font-weight:400">"account-heading"</span>&gt;&nbsp;<span style="color:#ff9d00;font-weight:700">{{</span>&nbsp;user.username&nbsp;<span style="color:#ff9d00;font-weight:700">}}</span>&lt;<span style="color:#ff9d00;font-weight:700">/</span>h2&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&nbsp;class=<span style="color:#3ad900;font-weight:400">"text-secondary"</span>&gt;&nbsp;<span style="color:#ff9d00;font-weight:700">{{</span>&nbsp;user.email&nbsp;<span style="color:#ff9d00;font-weight:700">}}</span>&lt;<span style="color:#ff9d00;font-weight:700">/</span>p&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span style="color:#ff9d00;font-weight:700">/</span>div&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span style="color:#ff9d00;font-weight:700">/</span>div&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span style="color:#ff9d00;font-weight:700">!</span>--&nbsp;FORM&nbsp;HERE&nbsp;--&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span style="color:#ff9d00;font-weight:700">/</span>div&gt;<br /><span style="color:#ff9d00;font-weight:700">{</span>%&nbsp;endblock&nbsp;content&nbsp;%<span style="color:#ff9d00;font-weight:700">}</span></div></div><br /><br />In order to get {{ user.profile.image.url }} to work, we need to add those media route to our our pattern. <br /><br />add, <br />from django.conf import settings<br />from django.conf.urls.static import static <br /><br /><br />• django_project<br />   ◇ django_project<br />      ▪ urls.py<br /><br /><br /><div class="codebox"><div class="codebox">from&nbsp;django.contrib&nbsp;import&nbsp;admin<br />from&nbsp;django.contrib.auth&nbsp;import&nbsp;views&nbsp;as&nbsp;auth_views<br />from&nbsp;django.urls&nbsp;import&nbsp;path,&nbsp;include<br />from&nbsp;django.conf&nbsp;import&nbsp;settings<br />from&nbsp;django.conf.urls.static&nbsp;import&nbsp;static<br />from&nbsp;users&nbsp;import&nbsp;views&nbsp;as&nbsp;user_views<br /><br />urlpatterns&nbsp;=&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;path<span style="color:#ff9d00;font-weight:700">(</span><span style="color:#3ad900;font-weight:400">'admin/'</span>,admin.site.urls<span style="color:#ff9d00;font-weight:700">)</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;path<span style="color:#ff9d00;font-weight:700">(</span><span style="color:#3ad900;font-weight:400">'register/'</span>,&nbsp;user_views.register,&nbsp;name&nbsp;=&nbsp;<span style="color:#3ad900;font-weight:400">'register'</span><span style="color:#ff9d00;font-weight:700">)</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;path<span style="color:#ff9d00;font-weight:700">(</span><span style="color:#3ad900;font-weight:400">'login/'</span>,&nbsp;auth_views.LoginView.as_view<span style="color:#ff9d00;font-weight:700">(</span>template_name&nbsp;=&nbsp;<span style="color:#3ad900;font-weight:400">'users/login.html'</span><span style="color:#ff9d00;font-weight:700">)</span>,&nbsp;name&nbsp;=&nbsp;<span style="color:#3ad900;font-weight:400">'login'</span><span style="color:#ff9d00;font-weight:700">)</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;path<span style="color:#ff9d00;font-weight:700">(</span><span style="color:#3ad900;font-weight:400">'logout/'</span>,&nbsp;auth_views.LogoutView.as_view<span style="color:#ff9d00;font-weight:700">(</span>template_name&nbsp;=&nbsp;<span style="color:#3ad900;font-weight:400">'users/login.html'</span><span style="color:#ff9d00;font-weight:700">)</span>,&nbsp;name&nbsp;=&nbsp;<span style="color:#3ad900;font-weight:400">'logout'</span><span style="color:#ff9d00;font-weight:700">)</span>,<br />&nbsp;&nbsp;&nbsp;&nbsp;path<span style="color:#ff9d00;font-weight:700">(</span><span style="color:#3ad900;font-weight:400">'blog/'</span>,&nbsp;include<span style="color:#ff9d00;font-weight:700">(</span><span style="color:#3ad900;font-weight:400">'blog.urls'</span><span style="color:#ff9d00;font-weight:700">))</span>,<br />]<br /><br /><span style="color:#ff9d00;font-weight:700">if</span>&nbsp;settings.DEBUG<span style="color:#ff9d00;font-weight:700">:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;urlpatterns&nbsp;+=&nbsp;static<span style="color:#ff9d00;font-weight:700">(</span>settings.MEDIA_URL,&nbsp;document_root&nbsp;=&nbsp;settings.MEDIA_ROOT&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">)</span></div></div><br /><br /><br />Add default image in media folder.<br /><br />Now, we need to make sure that when an user is created, they automatically get profile aswell which would include the default profile picture.<br /><br />This can be done by adding django signal.<br /><br /><strong><h3>Create new file in user app called signals.</h3></strong><br /><br />• django_project<br />   ◇ users<br />      ▪ signals.py<br /><br /><br />from django.db.models.signals import post_save<br /> <br /> This is the signal that is fired when an object is saved.<br /> In this case, we need a post_save signal when a user is created. So we also need to import the built in user model<br /> <br /> from django.contrib.auth.models import User<br /> <br /> we also need to create a receiver<br /> Receiver is a function that gets this signal and performs some task.<br /> so we need to import receiver also.<br /> <br /> from django.dispatch import receiver<br /> <br /> finally we need to import profile from the model  since we will be creating profile in a function  <br /> <br /> receiver is a decorator <br /><br /><div class="codebox"><div class="codebox">from&nbsp;django.db.models.signals&nbsp;import&nbsp;post_save<br />from&nbsp;django.contrib.auth.models&nbsp;import&nbsp;User<br />from&nbsp;django.dispatch&nbsp;import&nbsp;receiver<br />from&nbsp;.models&nbsp;import&nbsp;Profile<br /><br /><br /><span style="color:#0088ff;font-weight:400">#when&nbsp;the&nbsp;user&nbsp;is&nbsp;created,&nbsp;it&nbsp;will&nbsp;send&nbsp;this&nbsp;post_save&nbsp;signal</span><br /><span style="color:#0088ff;font-weight:400">#&nbsp;This&nbsp;signal&nbsp;is&nbsp;received&nbsp;by&nbsp;this&nbsp;receiver&nbsp;and&nbsp;the&nbsp;receiver&nbsp;is&nbsp;the&nbsp;create_profile&nbsp;function</span><br /><span style="color:#0088ff;font-weight:400">#instance&nbsp;is&nbsp;instance&nbsp;of&nbsp;the&nbsp;user&nbsp;and&nbsp;if&nbsp;user&nbsp;is&nbsp;created&nbsp;then&nbsp;create&nbsp;a&nbsp;profile&nbsp;where&nbsp;user&nbsp;=&nbsp;instance</span><br />@receiver<span style="color:#ff9d00;font-weight:700">(</span>post_save,&nbsp;sender&nbsp;=&nbsp;User<span style="color:#ff9d00;font-weight:700">)</span><br />def&nbsp;create_profile<span style="color:#ff9d00;font-weight:700">(</span>&nbsp;sender,&nbsp;instance,&nbsp;created,&nbsp;**kargs<span style="color:#ff9d00;font-weight:700">):</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">if</span>&nbsp;created<span style="color:#ff9d00;font-weight:700">:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Profile.object.create<span style="color:#ff9d00;font-weight:700">(</span>user&nbsp;=&nbsp;instance<span style="color:#ff9d00;font-weight:700">)</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br /><span style="color:#0088ff;font-weight:400">#create&nbsp;a&nbsp;save&nbsp;profile&nbsp;when&nbsp;user&nbsp;is&nbsp;saved</span><br />@receiver<span style="color:#ff9d00;font-weight:700">(</span>post_save,&nbsp;sender&nbsp;=&nbsp;User<span style="color:#ff9d00;font-weight:700">)</span><br />def&nbsp;create_profile<span style="color:#ff9d00;font-weight:700">(</span>&nbsp;sender,&nbsp;instance,&nbsp;**kargs<span style="color:#ff9d00;font-weight:700">):</span><br />&nbsp;&nbsp;&nbsp;&nbsp;instance.profile.<span style="color:#ffdd00;font-weight:400">save()</span></div></div><br /><br /><br />Now, we have to import the signal inside of the ready function of users app.py file<br /><br /><br />• django_project<br />   ◇ users<br />      ▪ app.py <br /><br />create ready method and imort those signals.<br /><br /><div class="codebox"><div class="codebox">from&nbsp;django.apps&nbsp;import&nbsp;AppConfig<br /><br />class&nbsp;UsersConfig<span style="color:#ff9d00;font-weight:700">(</span>AppConfig<span style="color:#ff9d00;font-weight:700">):</span><br />&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;=&nbsp;<span style="color:#3ad900;font-weight:400">'users'</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;ready<span style="color:#ff9d00;font-weight:700">(</span>self<span style="color:#ff9d00;font-weight:700">):</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;import&nbsp;users.signals</div></div><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /></div></body></html>