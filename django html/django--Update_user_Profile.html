<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Update user Profile</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
  
    <script type="text/javascript">
        function in_frame () { try { return window.self !== window.top; } catch (e) { return true; } }
        if (!in_frame()) {
            var page = location.pathname.substring(location.pathname.lastIndexOf("/") + 1);
            window.location = 'index.html#' + page;
        }
    </script>
</head>
<body><div class="page"><h1 class="title">Update user Profile</h1><br/>Updating user profile form<br /><br />• django_project<br />   ◇ users<br />      ▪ forms.py<br /><br />Here, we will create a model form and it allows us to create form that will work with a specific database model<br />here, we want a form that update our user model<br /><br />we are working with a profile model, we need to import this profile models<br /><br /><div class="codebox"><div class="codebox">from&nbsp;django&nbsp;import&nbsp;forms<br />from&nbsp;django.contrib.auth.models&nbsp;import&nbsp;User<br />from&nbsp;django.contrib.auth.forms&nbsp;import&nbsp;UserCreationForm<br />from&nbsp;.models&nbsp;import&nbsp;Profile<br /><br />class&nbsp;UserRegisterForm<span style="color:#ff9d00;font-weight:700">(</span>UserCreationForm<span style="color:#ff9d00;font-weight:700">):</span>&nbsp;<span style="color:#0088ff;font-weight:400">#&nbsp;inheriting&nbsp;UserCreationForm</span><br />&nbsp;&nbsp;&nbsp;&nbsp;email&nbsp;=&nbsp;forms.<span style="color:#ffdd00;font-weight:400">EmailField()</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;class&nbsp;Meta<span style="color:#ff9d00;font-weight:700">:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0088ff;font-weight:400">#specifing&nbsp;the&nbsp;model&nbsp;that&nbsp;we&nbsp;need&nbsp;to&nbsp;interact&nbsp;with&nbsp;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model&nbsp;=&nbsp;User&nbsp;<span style="color:#0088ff;font-weight:400">#&nbsp;model&nbsp;is&nbsp;user&nbsp;because&nbsp;whenever&nbsp;the&nbsp;form&nbsp;is&nbsp;validated,&nbsp;it&nbsp;going&nbsp;to&nbsp;create&nbsp;a&nbsp;new&nbsp;user</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fields&nbsp;=&nbsp;[<span style="color:#3ad900;font-weight:400">'username'</span>,&nbsp;<span style="color:#3ad900;font-weight:400">'email'</span>,&nbsp;<span style="color:#3ad900;font-weight:400">'password1'</span>,&nbsp;<span style="color:#3ad900;font-weight:400">'password2'</span>]<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0088ff;font-weight:400">#&nbsp;This&nbsp;is&nbsp;the&nbsp;field&nbsp;that&nbsp;are&nbsp;going&nbsp;to&nbsp;be&nbsp;shwon&nbsp;on&nbsp;our&nbsp;form</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />class&nbsp;UserUpdateForm<span style="color:#ff9d00;font-weight:700">(</span>forms.ModelForm<span style="color:#ff9d00;font-weight:700">):</span><br />&nbsp;&nbsp;&nbsp;&nbsp;email&nbsp;=&nbsp;forms.<span style="color:#ffdd00;font-weight:400">EmailField()</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;class&nbsp;Meta<span style="color:#ff9d00;font-weight:700">:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model&nbsp;=&nbsp;User<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fileds&nbsp;=&nbsp;[<span style="color:#3ad900;font-weight:400">'username'</span>,<span style="color:#3ad900;font-weight:400">'email'</span>]<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />class&nbsp;ProfileUpdateForm<span style="color:#ff9d00;font-weight:700">(</span>forms.ModelForm<span style="color:#ff9d00;font-weight:700">):</span><br />&nbsp;&nbsp;&nbsp;&nbsp;class&nbsp;Meta<span style="color:#ff9d00;font-weight:700">:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model&nbsp;=&nbsp;Profile<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fields&nbsp;=&nbsp;[<span style="color:#3ad900;font-weight:400">'image'</span>]</div></div><br /><br /><br /><br />• django_project<br />   ◇ blog<br />   ◇ users<br />      ▪ views.py<br /><br />import UserUpdateForm and ProfileUpdateForm <br /><br /><br /><div class="codebox"><div class="codebox">from&nbsp;django.shorcuts&nbsp;import&nbsp;renders,&nbsp;redirect<br />from&nbsp;django.contrib.auth.decorators&nbsp;import&nbsp;login_required<br />from&nbsp;django.contrib&nbsp;import&nbsp;messages<br />from&nbsp;.forms&nbsp;import&nbsp;UserRegisterForm,&nbsp;UserUpdateForm,&nbsp;ProfileUpdateForm<br /><br />def&nbsp;register<span style="color:#ff9d00;font-weight:700">(</span>request<span style="color:#ff9d00;font-weight:700">):</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">if</span>&nbsp;request.method&nbsp;==&nbsp;<span style="color:#3ad900;font-weight:400">'POST'</span><span style="color:#ff9d00;font-weight:700">:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form&nbsp;=&nbsp;UserRegisterForm<span style="color:#ff9d00;font-weight:700">(</span>request.POST<span style="color:#ff9d00;font-weight:700">)</span>&nbsp;<span style="color:#0088ff;font-weight:400">#&nbsp;create&nbsp;a&nbsp;form&nbsp;that&nbsp;has&nbsp;post&nbsp;data</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0088ff;font-weight:400">#&nbsp;validating&nbsp;form</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">if</span>&nbsp;form.<span style="color:#ffdd00;font-weight:400">is_valid()</span><span style="color:#ff9d00;font-weight:700">:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form.<span style="color:#ffdd00;font-weight:400">save()</span>&nbsp;<span style="color:#0088ff;font-weight:400">#&nbsp;This&nbsp;will&nbsp;automatically&nbsp;hased&nbsp;the&nbsp;password&nbsp;and&nbsp;save&nbsp;the&nbsp;data&nbsp;to&nbsp;database.</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0088ff;font-weight:400">#grabing&nbsp;username</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;username&nbsp;=&nbsp;form.cleaned_data.get<span style="color:#ff9d00;font-weight:700">(</span><span style="color:#3ad900;font-weight:400">'username'</span><span style="color:#ff9d00;font-weight:700">)</span>&nbsp;<span style="color:#0088ff;font-weight:400">#the&nbsp;validated&nbsp;form&nbsp;data&nbsp;will&nbsp;be&nbsp;in&nbsp;form.cleaned_data&nbsp;dictionary&nbsp;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0088ff;font-weight:400">#using&nbsp;flash&nbsp;message&nbsp;to&nbsp;show&nbsp;that&nbsp;valid&nbsp;data&nbsp;is&nbsp;recieved.</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;messages.success<span style="color:#ff9d00;font-weight:700">(</span>request,&nbsp;f<span style="color:#3ad900;font-weight:400">'Your&nbsp;account&nbsp;has&nbsp;been&nbsp;created!&nbsp;You&nbsp;are&nbsp;now&nbsp;able&nbsp;to&nbsp;log&nbsp;in.'</span><span style="color:#ff9d00;font-weight:700">)</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0088ff;font-weight:400">#&nbsp;redirecting&nbsp;user&nbsp;to&nbsp;different&nbsp;form.&nbsp;For&nbsp;this&nbsp;we&nbsp;need&nbsp;to&nbsp;import&nbsp;redirect&nbsp;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">return</span>&nbsp;redirect<span style="color:#ff9d00;font-weight:700">(</span><span style="color:#3ad900;font-weight:400">'login'</span><span style="color:#ff9d00;font-weight:700">)</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;else<span style="color:#ff9d00;font-weight:700">:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form&nbsp;=&nbsp;<span style="color:#ffdd00;font-weight:400">UserRegisterForm()</span>&nbsp;<span style="color:#0088ff;font-weight:400">#creating&nbsp;instance&nbsp;of&nbsp;this&nbsp;class</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">return</span>&nbsp;render<span style="color:#ff9d00;font-weight:700">(</span>request,&nbsp;<span style="color:#3ad900;font-weight:400">'users/register.html'</span>,&nbsp;<span style="color:#ff9d00;font-weight:700">{</span><span style="color:#3ad900;font-weight:400">'form'</span><span style="color:#ff9d00;font-weight:700">:</span>form<span style="color:#ff9d00;font-weight:700">})</span><br /><br />@login_required<br />def&nbsp;profile<span style="color:#ff9d00;font-weight:700">(</span>request<span style="color:#ff9d00;font-weight:700">):</span><br />&nbsp;&nbsp;&nbsp;&nbsp;u_form&nbsp;=&nbsp;<span style="color:#ffdd00;font-weight:400">UserUpdateForm()</span><br />&nbsp;&nbsp;&nbsp;&nbsp;p_form&nbsp;=&nbsp;<span style="color:#ffdd00;font-weight:400">ProfileUpdateForm()</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;<span style="color:#ff9d00;font-weight:700">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'u_form'</span>&nbsp;<span style="color:#ff9d00;font-weight:700">:</span>&nbsp;u_form,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'p_form'</span>&nbsp;<span style="color:#ff9d00;font-weight:700">:</span>&nbsp;p_form<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">return</span>&nbsp;render<span style="color:#ff9d00;font-weight:700">(</span>request,&nbsp;<span style="color:#3ad900;font-weight:400">'users/profile.html'</span>,&nbsp;context<span style="color:#ff9d00;font-weight:700">)</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<br /></div></div><br /><br /><br />• djnago_project<br />   ◇ users<br />      ▪ templates<br />         - users<br />            → profile.html<br /><br />In profile template, we have two forms. <br />but we will put this into single html form.<br /><br />also add special encoding type to form<br />this is require in oreder to our form to pass image data for profile picture<br /><br /><div class="codebox"><div class="codebox"><span style="color:#ff9d00;font-weight:700">{</span>%&nbsp;extends&nbsp;<span style="color:#3ad900;font-weight:400">"blog/base.html"</span>&nbsp;%<span style="color:#ff9d00;font-weight:700">}</span><br /><span style="color:#ff9d00;font-weight:700">{</span>%&nbsp;load&nbsp;crispy_forms_tags&nbsp;&nbsp;&nbsp;&nbsp;%<span style="color:#ff9d00;font-weight:700">}</span><br /><span style="color:#ff9d00;font-weight:700">{</span>%&nbsp;block&nbsp;content&nbsp;%<span style="color:#ff9d00;font-weight:700">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=<span style="color:#3ad900;font-weight:400">"content-section"</span>&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=<span style="color:#3ad900;font-weight:400">"media"</span>&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;img&nbsp;class=<span style="color:#3ad900;font-weight:400">"rounded-circle&nbsp;account-img"</span>&nbsp;src=<span style="color:#3ad900;font-weight:400">"{{&nbsp;user.profile.image.url&nbsp;}}"</span>&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=<span style="color:#3ad900;font-weight:400">"media-body"</span>&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h2&nbsp;class=<span style="color:#3ad900;font-weight:400">"account-heading"</span>&gt;&nbsp;<span style="color:#ff9d00;font-weight:700">{{</span>&nbsp;user.username&nbsp;<span style="color:#ff9d00;font-weight:700">}}</span>&lt;<span style="color:#ff9d00;font-weight:700">/</span>h2&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&nbsp;class=<span style="color:#3ad900;font-weight:400">"text-secondary"</span>&gt;&nbsp;<span style="color:#ff9d00;font-weight:700">{{</span>&nbsp;user.email&nbsp;<span style="color:#ff9d00;font-weight:700">}}</span>&lt;<span style="color:#ff9d00;font-weight:700">/</span>p&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span style="color:#ff9d00;font-weight:700">/</span>div&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span style="color:#ff9d00;font-weight:700">/</span>div&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;form&nbsp;method&nbsp;=&nbsp;<span style="color:#3ad900;font-weight:400">"POST"</span>&nbsp;enctype&nbsp;=&nbsp;<span style="color:#3ad900;font-weight:400">"mutlipart/form-data"</span>&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">{</span>%&nbsp;csrf_token&nbsp;%<span style="color:#ff9d00;font-weight:700">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;fieldset&nbsp;class&nbsp;=&nbsp;<span style="color:#3ad900;font-weight:400">"form-group"</span>&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;legend&nbsp;class&nbsp;=&nbsp;<span style="color:#3ad900;font-weight:400">"border-bottom&nbsp;mb-4"</span>&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Profile&nbsp;Details<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span style="color:#ff9d00;font-weight:700">/</span>legend&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">{{</span>&nbsp;u_form<span style="color:#ff9d00;font-weight:700">|</span>crispy&nbsp;<span style="color:#ff9d00;font-weight:700">}}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">{{</span>&nbsp;p_form<span style="color:#ff9d00;font-weight:700">|</span>crispy&nbsp;<span style="color:#ff9d00;font-weight:700">}}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span style="color:#ff9d00;font-weight:700">/</span>fieldset&gt;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class&nbsp;=&nbsp;<span style="color:#3ad900;font-weight:400">"form-group"</span>&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;button&nbsp;class&nbsp;=&nbsp;<span style="color:#3ad900;font-weight:400">"btn&nbsp;btn-outline-info"</span>&nbsp;<span style="color:#ff9d00;font-weight:700">type</span>&nbsp;=&nbsp;<span style="color:#3ad900;font-weight:400">"submit"</span>&gt;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Update<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span style="color:#ff9d00;font-weight:700">/</span>button&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span style="color:#ff9d00;font-weight:700">/</span>div&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span style="color:#ff9d00;font-weight:700">/</span>form&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span style="color:#ff9d00;font-weight:700">/</span>div&gt;<br /><span style="color:#ff9d00;font-weight:700">{</span>%&nbsp;endblock&nbsp;content&nbsp;%<span style="color:#ff9d00;font-weight:700">}</span></div></div><br /><br /><br /><br />Now, while running this, the update form will not display current information<br />This are models form that are expecting working on a specific model object.<br /><br /><br />• django_project<br />   ◇ blog<br />   ◇ users<br />      ▪ views.py<br /><br /><br /><br /><div class="codebox"><div class="codebox">from&nbsp;django.shorcuts&nbsp;import&nbsp;renders,&nbsp;redirect<br />from&nbsp;django.contrib.auth.decorators&nbsp;import&nbsp;login_required<br />from&nbsp;django.contrib&nbsp;import&nbsp;messages<br />from&nbsp;.forms&nbsp;import&nbsp;UserRegisterForm,&nbsp;UserUpdateForm,&nbsp;ProfileUpdateForm<br /><br />def&nbsp;register<span style="color:#ff9d00;font-weight:700">(</span>request<span style="color:#ff9d00;font-weight:700">):</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">if</span>&nbsp;request.method&nbsp;==&nbsp;<span style="color:#3ad900;font-weight:400">'POST'</span><span style="color:#ff9d00;font-weight:700">:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form&nbsp;=&nbsp;UserRegisterForm<span style="color:#ff9d00;font-weight:700">(</span>request.POST<span style="color:#ff9d00;font-weight:700">)</span>&nbsp;<span style="color:#0088ff;font-weight:400">#&nbsp;create&nbsp;a&nbsp;form&nbsp;that&nbsp;has&nbsp;post&nbsp;data</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0088ff;font-weight:400">#&nbsp;validating&nbsp;form</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">if</span>&nbsp;form.<span style="color:#ffdd00;font-weight:400">is_valid()</span><span style="color:#ff9d00;font-weight:700">:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form.<span style="color:#ffdd00;font-weight:400">save()</span>&nbsp;<span style="color:#0088ff;font-weight:400">#&nbsp;This&nbsp;will&nbsp;automatically&nbsp;hased&nbsp;the&nbsp;password&nbsp;and&nbsp;save&nbsp;the&nbsp;data&nbsp;to&nbsp;database.</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0088ff;font-weight:400">#grabing&nbsp;username</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;username&nbsp;=&nbsp;form.cleaned_data.get<span style="color:#ff9d00;font-weight:700">(</span><span style="color:#3ad900;font-weight:400">'username'</span><span style="color:#ff9d00;font-weight:700">)</span>&nbsp;<span style="color:#0088ff;font-weight:400">#the&nbsp;validated&nbsp;form&nbsp;data&nbsp;will&nbsp;be&nbsp;in&nbsp;form.cleaned_data&nbsp;dictionary&nbsp;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0088ff;font-weight:400">#using&nbsp;flash&nbsp;message&nbsp;to&nbsp;show&nbsp;that&nbsp;valid&nbsp;data&nbsp;is&nbsp;recieved.</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;messages.success<span style="color:#ff9d00;font-weight:700">(</span>request,&nbsp;f<span style="color:#3ad900;font-weight:400">'Your&nbsp;account&nbsp;has&nbsp;been&nbsp;created!&nbsp;You&nbsp;are&nbsp;now&nbsp;able&nbsp;to&nbsp;log&nbsp;in.'</span><span style="color:#ff9d00;font-weight:700">)</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0088ff;font-weight:400">#&nbsp;redirecting&nbsp;user&nbsp;to&nbsp;different&nbsp;form.&nbsp;For&nbsp;this&nbsp;we&nbsp;need&nbsp;to&nbsp;import&nbsp;redirect&nbsp;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">return</span>&nbsp;redirect<span style="color:#ff9d00;font-weight:700">(</span><span style="color:#3ad900;font-weight:400">'login'</span><span style="color:#ff9d00;font-weight:700">)</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;else<span style="color:#ff9d00;font-weight:700">:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form&nbsp;=&nbsp;<span style="color:#ffdd00;font-weight:400">UserRegisterForm()</span>&nbsp;<span style="color:#0088ff;font-weight:400">#creating&nbsp;instance&nbsp;of&nbsp;this&nbsp;class</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">return</span>&nbsp;render<span style="color:#ff9d00;font-weight:700">(</span>request,&nbsp;<span style="color:#3ad900;font-weight:400">'users/register.html'</span>,&nbsp;<span style="color:#ff9d00;font-weight:700">{</span><span style="color:#3ad900;font-weight:400">'form'</span><span style="color:#ff9d00;font-weight:700">:</span>form<span style="color:#ff9d00;font-weight:700">})</span><br /><br />@login_required<br />def&nbsp;profile<span style="color:#ff9d00;font-weight:700">(</span>request<span style="color:#ff9d00;font-weight:700">):</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">if</span>&nbsp;request.method&nbsp;==&nbsp;<span style="color:#3ad900;font-weight:400">'POST'</span><span style="color:#ff9d00;font-weight:700">:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;u_form&nbsp;=&nbsp;UserUpdateForm<span style="color:#ff9d00;font-weight:700">(</span>requrest.POST,&nbsp;instance&nbsp;=&nbsp;request.user<span style="color:#ff9d00;font-weight:700">)</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p_form&nbsp;=&nbsp;ProfileUpdateForm<span style="color:#ff9d00;font-weight:700">(</span>requrest.POST,&nbsp;request.FIlES,&nbsp;instance&nbsp;=&nbsp;request.user.profile<span style="color:#ff9d00;font-weight:700">)</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0088ff;font-weight:400">#request.FILES&nbsp;is&nbsp;for&nbsp;the&nbsp;image&nbsp;that&nbsp;user&nbsp;will&nbsp;upload</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">if</span>&nbsp;u_form.<span style="color:#ffdd00;font-weight:400">is_valid()</span>&nbsp;and&nbsp;p_form.<span style="color:#ffdd00;font-weight:400">is_valid()</span><span style="color:#ff9d00;font-weight:700">:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;u_form.<span style="color:#ffdd00;font-weight:400">save()</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p_form.<span style="color:#ffdd00;font-weight:400">save()</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;messages.success<span style="color:#ff9d00;font-weight:700">(</span>request,&nbsp;f<span style="color:#3ad900;font-weight:400">'Your&nbsp;account&nbsp;has&nbsp;been&nbsp;updated!'</span><span style="color:#ff9d00;font-weight:700">)</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0088ff;font-weight:400">#&nbsp;redirecting&nbsp;user&nbsp;to&nbsp;different&nbsp;form.&nbsp;For&nbsp;this&nbsp;we&nbsp;need&nbsp;to&nbsp;import&nbsp;redirect&nbsp;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">return</span>&nbsp;redirect<span style="color:#ff9d00;font-weight:700">(</span><span style="color:#3ad900;font-weight:400">'profile'</span><span style="color:#ff9d00;font-weight:700">)</span><br />&nbsp;&nbsp;&nbsp;&nbsp;else<span style="color:#ff9d00;font-weight:700">:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;u_form&nbsp;=&nbsp;UserUpdateForm<span style="color:#ff9d00;font-weight:700">(</span>instance&nbsp;=&nbsp;request.user<span style="color:#ff9d00;font-weight:700">)</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p_form&nbsp;=&nbsp;ProfileUpdateForm<span style="color:#ff9d00;font-weight:700">(</span>instance&nbsp;=&nbsp;request.user.profile<span style="color:#ff9d00;font-weight:700">)</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;=&nbsp;<span style="color:#ff9d00;font-weight:700">{</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'u_form'</span>&nbsp;<span style="color:#ff9d00;font-weight:700">:</span>&nbsp;u_form,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3ad900;font-weight:400">'p_form'</span>&nbsp;<span style="color:#ff9d00;font-weight:700">:</span>&nbsp;p_form<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">return</span>&nbsp;render<span style="color:#ff9d00;font-weight:700">(</span>request,&nbsp;<span style="color:#3ad900;font-weight:400">'users/profile.html'</span>,&nbsp;context<span style="color:#ff9d00;font-weight:700">)</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<br /></div></div><br /><br /><br /><strong><h3>Resizing large Image</h3></strong><br /><br />For resizing the image, we need to override the save method of profile model.<br /><br />• django_project<br />   ◇ users<br />      ▪ models.py<br /><br /><div class="codebox"><div class="codebox">from&nbsp;django.db&nbsp;import&nbsp;models<br />from&nbsp;django.contrib.auth.models&nbsp;import&nbsp;User<br /><br />class&nbsp;Profile<span style="color:#ff9d00;font-weight:700">(</span>models.Model<span style="color:#ff9d00;font-weight:700">):</span><br />&nbsp;&nbsp;&nbsp;&nbsp;user&nbsp;=&nbsp;models.OneToOneField<span style="color:#ff9d00;font-weight:700">(</span>User,&nbsp;on_delete&nbsp;=&nbsp;models.CASCADE<span style="color:#ff9d00;font-weight:700">)</span><br />&nbsp;&nbsp;&nbsp;&nbsp;image&nbsp;=&nbsp;models.ImageField<span style="color:#ff9d00;font-weight:700">(</span>default&nbsp;=&nbsp;<span style="color:#3ad900;font-weight:400">'default.jpg'</span>,&nbsp;upload_to&nbsp;=&nbsp;<span style="color:#3ad900;font-weight:400">'profile_pics'</span><span style="color:#ff9d00;font-weight:700">)</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__str__<span style="color:#ff9d00;font-weight:700">(</span>self<span style="color:#ff9d00;font-weight:700">):</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">return</span>&nbsp;f<span style="color:#3ad900;font-weight:400">'{self.user.username}&nbsp;Profile'</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;save<span style="color:#ff9d00;font-weight:700">(</span>self<span style="color:#ff9d00;font-weight:700">):</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ffdd00;font-weight:400">super()</span>.<span style="color:#ffdd00;font-weight:400">save()</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;img&nbsp;=&nbsp;Image.open<span style="color:#ff9d00;font-weight:700">(</span>self.image.path<span style="color:#ff9d00;font-weight:700">)</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">if</span>&nbsp;img.width&nbsp;&gt;&nbsp;300&nbsp;or&nbsp;img.height&nbsp;&gt;&nbsp;300<span style="color:#ff9d00;font-weight:700">:</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_size&nbsp;=&nbsp;<span style="color:#ff9d00;font-weight:700">(</span>300,300<span style="color:#ff9d00;font-weight:700">)</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;img.thumbnail<span style="color:#ff9d00;font-weight:700">(</span>output_size<span style="color:#ff9d00;font-weight:700">)</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;img.save<span style="color:#ff9d00;font-weight:700">(</span>sel.image.path<span style="color:#ff9d00;font-weight:700">)</span></div></div><br /><br /><br /><strong><h3>Display image beside each block</h3></strong><br /><br /><br />• djanog_project<br />   ◇ blog<br />      ▪ templates<br />         - blog<br />           <span style="color:#ff0000;"> → home.html</span><br /><br /><div class="codebox"><div class="codebox"><span style="color:#ff9d00;font-weight:700">{</span>%&nbsp;extends&nbsp;<span style="color:#3ad900;font-weight:400">"blog/base.html"</span>&nbsp;%<span style="color:#ff9d00;font-weight:700">}</span><br /><span style="color:#ff9d00;font-weight:700">{</span>%&nbsp;block&nbsp;content&nbsp;%<span style="color:#ff9d00;font-weight:700">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">{</span>%&nbsp;<span style="color:#ff9d00;font-weight:700">for</span>&nbsp;<span style="color:#7f0044;font-weight:400">post</span>&nbsp;<span style="color:#ff9d00;font-weight:700">in</span>&nbsp;posts&nbsp;%<span style="color:#ff9d00;font-weight:700">}</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;article&nbsp;class=<span style="color:#3ad900;font-weight:400">"media&nbsp;content-section"</span>&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;img&nbsp;class&nbsp;=&nbsp;<span style="color:#3ad900;font-weight:400">"rounder-circle&nbsp;article-img"</span>&nbsp;src&nbsp;=&nbsp;<span style="color:#3ad900;font-weight:400">"{{&nbsp;post.author.profile.image.url&nbsp;}}"</span>&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=<span style="color:#3ad900;font-weight:400">"media-body"</span>&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=<span style="color:#3ad900;font-weight:400">"article-metadata"</span>&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;class=<span style="color:#3ad900;font-weight:400">"mr-2"</span>&nbsp;href=<span style="color:#3ad900;font-weight:400">"#"</span>&gt;<span style="color:#ff9d00;font-weight:700">{{</span>&nbsp;post.author&nbsp;<span style="color:#ff9d00;font-weight:700">}}</span>&lt;<span style="color:#ff9d00;font-weight:700">/</span>a&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;small&nbsp;class=<span style="color:#3ad900;font-weight:400">"text-muted"</span>&gt;<span style="color:#ff9d00;font-weight:700">{{</span>&nbsp;post.date_posted<span style="color:#ff9d00;font-weight:700">|</span>data<span style="color:#ff9d00;font-weight:700">:</span>&nbsp;<span style="color:#3ad900;font-weight:400">"F&nbsp;d,&nbsp;Y"</span>&nbsp;<span style="color:#ff9d00;font-weight:700">}}</span>&lt;<span style="color:#ff9d00;font-weight:700">/</span>small&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span style="color:#ff9d00;font-weight:700">/</span>div&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h2&gt;&lt;a&nbsp;class=<span style="color:#3ad900;font-weight:400">"article-title"</span>&nbsp;href=<span style="color:#3ad900;font-weight:400">"#"</span>&gt;<span style="color:#ff9d00;font-weight:700">{{</span>&nbsp;post.title&nbsp;<span style="color:#ff9d00;font-weight:700">}}</span>&lt;<span style="color:#ff9d00;font-weight:700">/</span>a&gt;&lt;<span style="color:#ff9d00;font-weight:700">/</span>h2&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&nbsp;class=<span style="color:#3ad900;font-weight:400">"article-content"</span>&gt;<span style="color:#ff9d00;font-weight:700">{{</span>&nbsp;post.content&nbsp;<span style="color:#ff9d00;font-weight:700">}}</span>&lt;<span style="color:#ff9d00;font-weight:700">/</span>p&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span style="color:#ff9d00;font-weight:700">/</span>div&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span style="color:#ff9d00;font-weight:700">/</span>article&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff9d00;font-weight:700">{</span>%&nbsp;endfor&nbsp;%<span style="color:#ff9d00;font-weight:700">}</span><br /><span style="color:#ff9d00;font-weight:700">{</span>%&nbsp;endblock&nbsp;content&nbsp;%<span style="color:#ff9d00;font-weight:700">}</span></div></div><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /></div></body></html>